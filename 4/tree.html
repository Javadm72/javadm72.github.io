<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>شجره‌نامه طایفه براهوئی زیرکاری ممدحسنی</title>
<link rel="stylesheet" href="tree_style.css">
</head>
<body>

<div class="container">
    <h1>نمودار درختی با اطلاعات افراد</h1>

    <p class="description">برای مشاهده زیرمجموعه‌ها روی گره کلیک کنید...</p>




















    <!-- شجره نامه اصلی -->
    <div class="tree">
        <ul>
            <li>




                <div class="tree-node has-children" data-name="هوتک" data-last="براهوئی" data-parent="pedar" onclick="toggleChildren(this)">هوتک</div>
                <button class="info-btn" onclick="showInfo('هوتک','براهوئی','3','4','5','6','7')">مشاهده اطلاعات</button>
                <ul class="children">
                    <li>
                        <div class="tree-node has-children" data-name="الو" data-last="براهوئی" data-parent="هوتک" onclick="toggleChildren(this)">الو</div>
                        <button class="info-btn" onclick="showInfo('الو','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                        <ul class="children">
                            <li>







                                <div class="tree-node has-children" data-name="رادو" data-last="براهوئی" data-parent="الو" onclick="toggleChildren(this)">رادو</div>
                                <button class="info-btn" onclick="showInfo('رادو','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                <ul class="children">
                                    <li>
                                        <li>
                                        <div class="tree-node has-children" data-name="مستان" data-last="براهوئی" data-parent="رادو" onclick="toggleChildren(this)">مستان</div>
                                        <button class="info-btn" onclick="showInfo('مستان','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                    </li>
                                    <li>
                                        <div class="tree-node has-children" data-name="مرود" data-last="براهوئی" data-parent="رادو" onclick="toggleChildren(this)">مرود</div>
                                        <button class="info-btn" onclick="showInfo('مرود','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                    </li>
                                        <li>
                                        <div class="tree-node has-children" data-name="عبدالکریم" data-last="براهوئی" data-parent="رادو" onclick="toggleChildren(this)">عبدالکریم</div>
                                        <button class="info-btn" onclick="showInfo('عبدالکریم','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                    </li>
                                    <li>
                                      
                                            <div class="tree-node has-children" data-name="نوشیروان" data-last="براهوئی" data-parent="رادو" onclick="toggleChildren(this)">نوشیروان</div>
                                            <button class="info-btn" onclick="showInfo('نوشیروان','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                            <ul class="children">
                                                <li>
                                                    <div class="tree-node has-children" data-name="نخی" data-last="براهوئی" data-parent="نوشیروان" onclick="toggleChildren(this)">نخی</div>
                                                    <button class="info-btn" onclick="showInfo('نخی','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                                    <ul class="children">
                                                        <li>
                                                            <div class="tree-node has-children" data-name="رحیمداد" data-last="براهوئی" data-parent="نخی" onclick="toggleChildren(this)">رحیمداد</div>
                                                            <button class="info-btn" onclick="showInfo('رحیمداد','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                                            <ul class="children">
                                                                <li>
                                                                    
                                                                </li>
                                                            </ul>
                                                        </li>

                                                        <li>
                                                            <div class="tree-node has-children" data-name="مرادخان" data-last="براهوئی" data-parent="نخی" onclick="toggleChildren(this)">مرادخان</div>
                                                            <button class="info-btn" onclick="showInfo('مرادخان','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                                            <ul class="children">
                                                                <li>
                                                                    
                                                                </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                    
                                    </li>
                                        
                                    </li>
                                </ul>






                                <li>
                                <div class="tree-node has-children" data-name="جغردی" data-last="براهوئی" data-parent="الو" onclick="toggleChildren(this)">جغردی</div>
                                <button class="info-btn" onclick="showInfo('جغردی','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                </li>




                                
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </div>











    <!--
افراد



                                <li>
                                <div class="tree-node has-children" data-name="رادو" data-last="براهوئی" data-parent="پدر" onclick="toggleChildren(this)">رادو</div>
                                <button class="info-btn" onclick="showInfo('اسم','براهوئی','ه','ت','م','س','ز')">مشاهده اطلاعات</button>
                                <ul class="children">
                                    <li>
                                        
                                    </li>
                                </ul>
                                </li>




    -->
















</div>

<!--
    <button class="search-btn" onclick="openSearchModal()">🔍 جستجو</button>
 مودال جستجو



<div id="searchModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeSearchModal()">&times;</span>
    <h2>جستجو در شجره‌نامه</h2>
    <div class="search-row">
      <label>نام فرد:</label>
      <input type="text" id="searchName">
    </div>
    <div class="search-row">
      <label>نام پدر/مادر:</label>
      <input type="text" id="searchParent">
    </div>
    <button class="search-btn" onclick="performSearch()">تأیید</button>
    <div id="searchResults"></div>
  </div>
</div>


<div class="formSearch"><iframe src="form/search.html" frameborder="0"></iframe></div>
/*


    
-->










  <!-- مودال اطلاعات -->
  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="infoImage" src="images/default.png" class="profile-img">
      <h1><span id="infoFirstName"></span> <span id="infoLastName"></span></h1>
      <p><b>نام همسر:</b> <span id="ham"></span></p>

      <h3><br><b>تاریخ تولد : </b><span id="ttavalod"></span></h2>
      <h3><br><b>محل تولد : </b><span id="mtavalod"></span></h2>
      <h3><br><b>محل سکونت : </b><span id="msokonat"></span></h2>
      <h3><br><b>زندگی نامه : </b><span id="history"></span></h2>
      <br>

      <button id="btn_gallery" onclick="requestPin()">'گالری تصاویر'</button>

      <button id="btn_add" onclick="requestPin()">➕ افزودن فرزند</button>
    </div>
  </div>
<!-- مودال اطلاعات (قبلی شما) -->
<div id="infoModal" class="modal"> ... </div>

<script>
    // تابع برای نمایش/مخفی کردن فرزندان
    function toggleChildren(node) {
        // پیدا کردن عنصر والد
        const parentLi = node.parentElement;
        
        // پیدا کردن لیست فرزندان
        const children = parentLi.querySelector('.children');
        
        // اگر گره در حال حاضر توسعه یافته است
        if (node.classList.contains('expanded')) {
            // فقط این گره را جمع کنیم
            node.classList.remove('expanded');
            if (children) {
                children.classList.remove('show');
            }
            return;
        }
        
        // غیرفعال کردن حالت توسعه یافته از گره‌های هم‌سطح
        const siblings = Array.from(parentLi.parentElement.children);
        siblings.forEach(sibling => {
            if (sibling !== parentLi) {
                const siblingNode = sibling.querySelector('.tree-node');
                if (siblingNode) {
                    siblingNode.classList.remove('expanded');
                }
                const siblingChildren = sibling.querySelector('.children');
                if (siblingChildren) {
                    siblingChildren.classList.remove('show');
                }
            }
        });
        
        // فعال کردن حالت توسعه یافته برای گره فعلی
        node.classList.add('expanded');
        if (children) {
            children.classList.add('show');
        }
    }
    
    // تابع برای نمایش اطلاعات فرد
    function showInfo(firstName, lastName, hamsar,tt,mt,ms,his) {
        document.getElementById('infoFirstName').textContent = firstName;
        document.getElementById('infoLastName').textContent = lastName;
        document.getElementById('ham').textContent = hamsar;
        document.getElementById('ttavalod').textContent = tt;
        document.getElementById('mtavalod').textContent = mt;
        document.getElementById('msokonat').textContent = ms;
        document.getElementById('history').textContent = his;


        



        
        
        document.getElementById('infoModal').style.display = 'block';
        
        // جلوگیری از انتشار رویداد کلیک به عناصر والد
        event.stopPropagation();
    }
    
    // تابع برای بستن مودال
    function closeModal() {
        document.getElementById('infoModal').style.display = 'none';
    }
    
    // بستن مودال با کلیک خارج از آن
    window.onclick = function(event) {
        const modal = document.getElementById('infoModal');
        if (event.target === modal) {
            closeModal();
        }
    };





    // جستجو
function openSearchModal(){ document.getElementById('searchModal').style.display = 'block'; }
function closeSearchModal(){ document.getElementById('searchModal').style.display = 'none'; }

function performSearch(){
  const name = document.getElementById('searchName').value.trim();
  const parent = document.getElementById('searchParent').value.trim();
  const resultsDiv = document.getElementById('searchResults');
  resultsDiv.innerHTML = "";

  const nodes = document.querySelectorAll('.tree-node');
  let found = [];

  nodes.forEach(node=>{
    const n = node.dataset.name;
    const p = node.dataset.parent;
    if((name===""||n.includes(name)) && (parent===""||p.includes(parent))){
      found.push(node);
    }
  });

  if(found.length===0){
    resultsDiv.innerHTML = "<p>هیچ نتیجه‌ای یافت نشد ❌</p>";
  } else {
    found.forEach(node=>{
      const div = document.createElement('div');
      div.className = "result-item";
      div.textContent = node.textContent;
      div.onclick = ()=>{
        closeSearchModal();
        node.scrollIntoView({behavior:'smooth', block:'center'});
        node.classList.add('expanded');
        setTimeout(()=>node.classList.remove('expanded'),2000);
      };
      resultsDiv.appendChild(div);
    });
    
  }
}



function openSearchModal(){ document.getElementById('searchModal').style.display = 'block'; }
function closeSearchModal(){ document.getElementById('searchModal').style.display = 'none'; }

function performSearch(){
    const name = document.getElementById('searchName').value.trim();
    const parent = document.getElementById('searchParent').value.trim();
    const resultsDiv = document.getElementById('searchResults');
    resultsDiv.innerHTML = "";

    const nodes = document.querySelectorAll('.tree-node');
    let found = [];

    nodes.forEach(node=>{
        const n = node.dataset.name;
        const p = node.dataset.parent;
        if( (name === "" || n.includes(name)) &&
            (parent === "" || p.includes(parent)) ){
            found.push(node);
        }
    });

    if(found.length === 0){
        resultsDiv.innerHTML = "<p>هیچ نتیجه‌ای یافت نشد ❌</p>";
    } else {
        found.forEach(node=>{
            const div = document.createElement('div');
            div.className = "result-item";
            div.textContent = node.textContent;
            div.onclick = ()=>{
                closeSearchModal();
                node.scrollIntoView({behavior:'smooth', block:'center'});
                node.classList.add('expanded');
                setTimeout(()=>node.classList.remove('expanded'), 2000);
            };
            resultsDiv.appendChild(div);
        });
    }
}

</script>

</body>
</html>